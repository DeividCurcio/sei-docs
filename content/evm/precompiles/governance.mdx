---
title: 'Governance Precompile Usage'
description: "Learn how to interact with Sei's governance precompile through ethers.js, enabling proposal submission, voting, token deposits, and governance queries to participate in on-chain governance directly from EVM applications."
keywords: ['governance precompile', 'ethers.js', 'proposal voting', 'blockchain governance', 'on-chain voting', 'sei evm', 'dao governance']
---

import { Callout } from 'nextra/components';

# Governance Precompile Usage

**Address:** `0x0000000000000000000000000000000000001006`

The Sei governance precompile enables EVM applications to participate in Sei's on-chain governance process. This allows users and smart contracts to submit proposals, vote on them, deposit tokens, and query governance information directly through the EVM interface.

<Callout type="info">**What is a precompile?** A precompile is a special smart contract deployed at a fixed address by the Sei protocol itself, that exposes custom native chain logic to EVM-based applications. It acts like a regular contract from the EVM's perspective, but executes privileged, low-level logic efficiently.</Callout>

## How Does the Governance Precompile Work?

The governance precompile at address `0x0000000000000000000000000000000000001006` exposes functions like `vote()`, `voteWeighted()`, `deposit()`, and `submitProposal()`.

- **Direct Integration:** EVM contracts and dApps can interact with governance like any other smart contract method.
- **Native Execution:** Governance operations are executed at the Cosmos SDK level for maximum efficiency.
- **Seamless Bridge:** No need for separate wallet integrations or complex cross-chain interactions.

## Use Cases

- **DAO Integration:** Build decentralized autonomous organizations with native governance.
- **DeFi Protocols:** Enable protocol governance through familiar EVM interfaces.
- **Voting Interfaces:** Create user-friendly governance participation tools.
- **Automated Governance:** Smart contracts that vote based on predetermined strategies.
- **Governance Aggregators:** Build platforms that aggregate and simplify governance participation.

## Functions

The governance precompile exposes the following functions:

### Transaction Functions

```solidity
/// Cast a vote on the specified proposal.
/// @param proposalId The ID of the proposal to vote on.
/// @param option The option to vote for. (1=Yes, 2=Abstain, 3=No, 4=NoWithVeto)
/// @return Whether the vote was successfully cast.
function vote(
    uint64 proposalID,
    int32 option
) external returns (bool success);

struct WeightedVoteOption {
    int32 option;   // Vote option (1=Yes, 2=Abstain, 3=No, 4=NoWithVeto)
    string weight;  // Weight as decimal string (e.g., "0.7")
}

/// Cast a weighted vote on a governance proposal (vote splitting)
/// @param proposalID The ID of the proposal to vote on
/// @param options Array of weighted vote options, weights must sum to 1.0
/// @return success Whether the vote was successfully cast
function voteWeighted(
    uint64 proposalID,
    WeightedVoteOption[] calldata options
) external returns (bool success);

/// Deposit funds into the specified proposal.
/// @param proposalId The ID of the proposal to deposit to.
/// @return Whether the tokens were successfully deposited.
function deposit(
    uint64 proposalID
) payable external returns (bool success);

/// Submit a new governance proposal. Deposit should be provided via msg.value
/// @param proposalJSON JSON string containing proposal details e.g.:
///        {
///          "title": "Proposal Title",
///          "description": "Proposal Description",
///          "type": "Text", // Optional, defaults to "Text" if empty
///          "is_expedited": false // Optional
///        }
/// @return proposalID The ID of the created proposal

function submitProposal(
    string calldata proposalJSON
) payable external returns (uint64 proposalID);
```

## Using the Contract

### Setup

#### Prerequisites

Before getting started, ensure you have:

- **Node.js** (v16 or higher)
- **npm** or **yarn** package manager
- **MetaMask** or compatible EVM wallet
- **SEI tokens** for gas fees and governance deposits

#### Install Dependencies

Install the required packages for interacting with Sei precompiles:

```bash copy
# Install ethers.js for smart contract interactions
npm install ethers

# Install Sei EVM bindings for precompile addresses and ABIs
npm install @sei-js/evm

# Install dotenv for managing private keys (optional but recommended)
npm install dotenv
```

#### Network Configuration

Add Sei networks to your MetaMask or configure your provider:

##### Sei Mainnet

```typescript copy
const seiMainnet = {
  chainId: '0x531', // 1329 in decimal
  chainName: 'Sei Network',
  nativeCurrency: {
    name: 'SEI',
    symbol: 'SEI',
    decimals: 18
  },
  rpcUrls: ['https://evm-rpc.sei-apis.com'],
  blockExplorerUrls: ['https://seitrace.com']
};
```

##### Sei Testnet (Atlantic-2)

```typescript copy
const seiTestnet = {
  chainId: '0xae3f3', // 713715 in decimal
  chainName: 'Sei Testnet',
  nativeCurrency: {
    name: 'SEI',
    symbol: 'SEI',
    decimals: 18
  },
  rpcUrls: ['https://evm-rpc-testnet.sei-apis.com'],
  blockExplorerUrls: ['https://seitrace.com/?chain=atlantic-2']
};
```

#### Import Precompile Components

```typescript copy
// Import Governance precompile address and ABI
// View the entire ABI here: https://github.com/sei-protocol/sei-chain/tree/main/precompiles/gov
import { GOVERNANCE_PRECOMPILE_ABI, GOVERNANCE_PRECOMPILE_ADDRESS } from '@sei-js/evm';
import { ethers } from 'ethers';
```

<Callout type="info">**Precompile Address:** The governance precompile is deployed at `0x0000000000000000000000000000000000001006`</Callout>

#### Get SEI Tokens

##### For Testnet

Use the official Sei faucet to get testnet tokens:

- **Faucet URL:** [https://www.sei.io/faucet](https://www.sei.io/faucet)
- **Requirements:** Valid wallet address on Sei testnet

##### For Mainnet

Purchase SEI tokens from supported exchanges or bridge from other networks.

### Contract Initialization

Set up your provider, signer, and contract instance:

```typescript copy
// Using MetaMask as the signer and provider (browser environment)
const provider = new ethers.BrowserProvider(window.ethereum);
await provider.send('eth_requestAccounts', []);
const signer = await provider.getSigner();

// Or for Node.js environment
const provider = new ethers.JsonRpcProvider('https://evm-rpc-testnet.sei-apis.com');
const signer = new ethers.Wallet('YOUR_PRIVATE_KEY', provider);

// Create a contract instance for the governance precompile
const governance = new ethers.Contract(GOVERNANCE_PRECOMPILE_ADDRESS, GOVERNANCE_PRECOMPILE_ABI, signer);
```

## Vote Options

The governance system uses the following vote options:

| Option     | Value | Description                   |
| ---------- | ----- | ----------------------------- |
| Yes        | 1     | Vote in favor of the proposal |
| Abstain    | 2     | Abstain from voting           |
| No         | 3     | Vote against the proposal     |
| NoWithVeto | 4     | Vote against with veto        |

## Step-by-Step Guide: Using the Governance Precompile

### Submit a Proposal

```typescript copy
// Proposal details
const proposal = {
  title: 'Increase Staking Rewards',
  description: 'This proposal aims to increase staking rewards by 2%',
  type: 'Text', // Optional, defaults to "Text"
  is_expedited: false // Optional
};

// Convert to JSON string
const proposalJSON = JSON.stringify(proposal);

// Submit with deposit (e.g., 10 SEI)
const depositAmount = ethers.parseUnits('10', 18);
const tx = await governance.submitProposal(proposalJSON, { value: depositAmount });
const receipt = await tx.wait();

// Get proposal ID from receipt
const proposalId = receipt.logs[0].args.proposalID;
console.log('Proposal ID:', proposalId.toString());
```

### Vote on a Proposal

```typescript copy
// Simple voting
const proposalId = 1;
const voteOption = 1; // Yes

const tx = await governance.vote(proposalId, voteOption);
const receipt = await tx.wait();
console.log('Vote cast successfully:', receipt.hash);
```

### Weighted Voting

```typescript copy
// Split vote: 70% Yes, 30% Abstain
const proposalId = 1;
const weightedOptions = [
  { option: 1, weight: '0.7' }, // 70% Yes
  { option: 2, weight: '0.3' } // 30% Abstain
];

const tx = await governance.voteWeighted(proposalId, weightedOptions);
const receipt = await tx.wait();
console.log('Weighted vote cast successfully:', receipt.hash);
```

### Deposit to a Proposal

```typescript copy
// Deposit additional tokens to meet minimum deposit
const proposalId = 1;
const depositAmount = ethers.parseUnits('5', 18); // 5 SEI

const tx = await governance.deposit(proposalId, { value: depositAmount });
const receipt = await tx.wait();
console.log('Deposit successful:', receipt.hash);
```

## Complete Integration Example

Create a file named `governance-demo.js`:

```javascript copy
// governance-demo.js
const { ethers } = require('ethers');
const { GOVERNANCE_PRECOMPILE_ABI, GOVERNANCE_PRECOMPILE_ADDRESS } = require('@sei-js/evm');
require('dotenv').config();

async function main() {
  try {
    // Connect to Sei Testnet
    console.log('Connecting to Sei Testnet...');
    const provider = new ethers.JsonRpcProvider('https://evm-rpc-testnet.sei-apis.com');

    // Use your private key from environment variable
    const privateKey = process.env.PRIVATE_KEY;
    if (!privateKey) {
      throw new Error('Please set PRIVATE_KEY in .env file');
    }

    const wallet = new ethers.Wallet(privateKey, provider);
    console.log('Wallet address:', wallet.address);

    // Check balance
    const balance = await provider.getBalance(wallet.address);
    console.log('Wallet balance:', ethers.formatEther(balance), 'SEI\n');

    // Initialize governance precompile contract
    const governance = new ethers.Contract(GOVERNANCE_PRECOMPILE_ADDRESS, GOVERNANCE_PRECOMPILE_ABI, wallet);

    console.log('=== Governance Precompile Demo ===\n');

    // 1. Submit a proposal
    console.log('1. Submitting a new proposal...');
    const proposal = {
      title: 'Test Proposal from EVM',
      description: 'This is a test proposal submitted through the governance precompile',
      type: 'Text',
      is_expedited: false
    };

    const proposalJSON = JSON.stringify(proposal);
    const depositAmount = ethers.parseUnits('10', 18); // 10 SEI deposit

    try {
      const submitTx = await governance.submitProposal(proposalJSON, {
        value: depositAmount,
        gasLimit: 500000
      });

      console.log('   Transaction hash:', submitTx.hash);
      const submitReceipt = await submitTx.wait();

      // Extract proposal ID from events
      const proposalId = submitReceipt.logs[0].args?.proposalID || 1;
      console.log('   Proposal submitted! ID:', proposalId.toString());

      // 2. Vote on the proposal
      console.log('\n2. Voting on proposal', proposalId.toString(), '...');
      const voteOption = 1; // Yes

      const voteTx = await governance.vote(proposalId, voteOption, {
        gasLimit: 200000
      });

      console.log('   Transaction hash:', voteTx.hash);
      await voteTx.wait();
      console.log('   Vote cast successfully! (Voted: Yes)');

      // 3. Demonstrate weighted voting
      console.log('\n3. Casting weighted vote on proposal', proposalId.toString(), '...');
      const weightedOptions = [
        { option: 1, weight: '0.6' }, // 60% Yes
        { option: 2, weight: '0.3' }, // 30% Abstain
        { option: 3, weight: '0.1' } // 10% No
      ];

      const weightedTx = await governance.voteWeighted(proposalId, weightedOptions, {
        gasLimit: 250000
      });

      console.log('   Transaction hash:', weightedTx.hash);
      await weightedTx.wait();
      console.log('   Weighted vote cast successfully!');
      console.log('   Vote split: 60% Yes, 30% Abstain, 10% No');

      // 4. Add deposit to proposal
      console.log('\n4. Adding deposit to proposal', proposalId.toString(), '...');
      const additionalDeposit = ethers.parseUnits('5', 18); // 5 SEI

      const depositTx = await governance.deposit(proposalId, {
        value: additionalDeposit,
        gasLimit: 200000
      });

      console.log('   Transaction hash:', depositTx.hash);
      await depositTx.wait();
      console.log('   Additional deposit of 5 SEI added successfully!');
    } catch (error) {
      if (error.message.includes('insufficient funds')) {
        console.log('\n⚠️  Insufficient funds for proposal submission');
        console.log('   Please ensure your wallet has enough SEI for deposits and gas');
      } else {
        throw error;
      }
    }

    console.log('\n✅ Governance demo completed successfully!');
    console.log('\nNote: You can view your proposals and votes at:');
    console.log('https://sei.explorers.guru/proposals (for mainnet)');
  } catch (error) {
    console.error('\nError:', error.message);
    process.exit(1);
  }
}

// Run the demo
main().catch(console.error);
```

### Running the Example

1. **Create a new directory and initialize npm:**

```bash copy
mkdir governance-demo
cd governance-demo
npm init -y
```

2. **Install dependencies:**

```bash copy
npm install ethers @sei-js/evm dotenv
```

3. **Create a `.env` file:**

```bash copy
PRIVATE_KEY=your_private_key_here
```

4. **Create the demo file:**
   Copy the complete integration example above into `governance-demo.js`

5. **Run the script:**

```bash copy
node governance-demo.js
```

### Expected Output

When you run the script, you should see output similar to:

```
Connecting to Sei Testnet...
Wallet address: 0x742d35Cc6634C0532925a3b844Bc6789e065f3B
Wallet balance: 100.5 SEI

=== Governance Precompile Demo ===

1. Submitting a new proposal...
   Transaction hash: 0x123...abc
   Proposal submitted! ID: 42

2. Voting on proposal 42 ...
   Transaction hash: 0x456...def
   Vote cast successfully! (Voted: Yes)

3. Casting weighted vote on proposal 42 ...
   Transaction hash: 0x789...ghi
   Weighted vote cast successfully!
   Vote split: 60% Yes, 30% Abstain, 10% No

4. Adding deposit to proposal 42 ...
   Transaction hash: 0xabc...123
   Additional deposit of 5 SEI added successfully!

✅ Governance demo completed successfully!

Note: You can view your proposals and votes at:
https://sei.explorers.guru/proposals (for mainnet)
```

## Advanced Usage Example

### Governance Manager Contract

Create a smart contract that manages governance participation:

```solidity copy
// GovernanceManager.sol
pragma solidity ^0.8.0;

interface IGovernance {
    struct WeightedVoteOption {
        int32 option;
        string weight;
    }

    function vote(uint64 proposalID, int32 option) external returns (bool);
    function voteWeighted(uint64 proposalID, WeightedVoteOption[] calldata options) external returns (bool);
    function deposit(uint64 proposalID) external payable returns (bool);
    function submitProposal(string calldata proposalJSON) external payable returns (uint64);
}

contract GovernanceManager {
    IGovernance constant GOVERNANCE = IGovernance(0x0000000000000000000000000000000000001006);

    mapping(address => bool) public members;
    address public admin;

    constructor() {
        admin = msg.sender;
    }

    modifier onlyMember() {
        require(members[msg.sender] || msg.sender == admin, "Not a member");
        _;
    }

    function addMember(address member) external {
        require(msg.sender == admin, "Only admin");
        members[member] = true;
    }

    // Collective voting function
    function collectiveVote(uint64 proposalID, int32 option) external onlyMember {
        bool success = GOVERNANCE.vote(proposalID, option);
        require(success, "Vote failed");
    }

    // Submit proposal with automatic deposit collection
    function submitCollectiveProposal(
        string calldata title,
        string calldata description
    ) external payable onlyMember returns (uint64) {
        string memory proposalJSON = string(abi.encodePacked(
            '{"title":"', title,
            '","description":"', description,
            '","type":"Text"}'
        ));

        return GOVERNANCE.submitProposal{value: msg.value}(proposalJSON);
    }
}
```

## Troubleshooting

### Common Issues and Solutions

#### Insufficient Deposit

```typescript copy
// Check minimum deposit requirement before submitting
const MIN_DEPOSIT = ethers.parseUnits('10', 18); // 10 SEI typical minimum

if (depositAmount < MIN_DEPOSIT) {
  console.log('Deposit too low. Minimum required:', ethers.formatEther(MIN_DEPOSIT));
}
```

#### Invalid Vote Option

```typescript copy
// Validate vote option
function isValidVoteOption(option) {
  return option >= 1 && option <= 4;
}

const voteOption = 5; // Invalid
if (!isValidVoteOption(voteOption)) {
  console.error('Invalid vote option. Must be 1-4');
}
```

### Error Code Reference

| Error                     | Cause                     | Solution                        |
| ------------------------- | ------------------------- | ------------------------------- |
| `proposal does not exist` | Invalid proposal ID       | Verify proposal ID exists       |
| `inactive proposal`       | Voting period ended       | Check proposal status           |
| `insufficient deposit`    | Deposit below minimum     | Increase deposit amount         |
| `invalid vote option`     | Vote option not 1-4       | Use valid vote option           |
| `already voted`           | Already voted on proposal | Can only vote once per proposal |

## Important Notes

<Callout type="warning">
**Key Considerations:**

- **Minimum Deposit:** Proposals require a minimum deposit (usually 10 SEI on testnet)
- **Vote Options:** Must be integers 1-4 (Yes, Abstain, No, NoWithVeto)
- **Weighted Votes:** Weights must sum to exactly 1.0
- **One Vote Per Address:** Each address can only vote once per proposal
- **Proposal Types:** "Text" is the default type for general proposals

</Callout>

<Callout type="info">**Need Help?** If you encounter issues not covered here, check the [Sei Discord](https://discord.gg/sei) or [GitHub repository](https://github.com/sei-protocol/sei-chain) for community support.</Callout>
